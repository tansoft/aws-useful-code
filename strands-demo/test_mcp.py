import sys, os, boto3
from strands import Agent
from strands.tools.mcp import MCPClient
from mcp import stdio_client,StdioServerParameters

def test_web_search():
    client = MCPClient(lambda: stdio_client(StdioServerParameters(command="npx", args=["@playwright/mcp@latest"])))
    with client:
        agent = Agent(tools=client.list_tools_sync())
        '''
        我很乐意帮您定制一个7天的上海旅游行程。为了给您提供最好的信息，我需要搜索一些旅游相关资料。我将使用浏览器工具来查询上海的旅游景点、美食、交通等相关信息。
        首先，让我搜索一些上海旅游信息：
        Tool #1: browser_navigate
        看来Google搜索加载超时。让我尝试使用其他搜索引擎：
        Tool #2: browser_navigate
        我需要查找更多具体信息，让我尝试访问旅游网站：
        Tool #3: browser_navigate
        让我查看一些上海的主要景点：
        Tool #4: browser_navigate
        我需要了解上海的景点信息，让我查看一下上海的主要景点：
        Tool #5: browser_navigate
        让我查看一些上海迪士尼的相关信息：
        Tool #6: browser_navigate
        让我搜索上海迪士尼的相关信息：
        Tool #7: browser_navigate
        让我看一下上海的餐饮信息：
        Tool #8: browser_navigate
        基于我收集到的信息，我现在可以为您定制一个7天的上海旅游行程了。请稍等，我会给您整理一个详细的计划。

        # 上海7日精彩旅程定制攻略

        根据我收集的信息，为您量身定制了一份上海7天旅游行程，涵盖了上海的经典景点、特色美食和文化体验。

        ## 第一天：外滩与城市地标

        **上午：**
        - 抵达上海，入住酒店（推荐人民广场或南京路步行街附近的酒店，交通便利）
        - 游览上海博物馆，了解上海历史文化

        **下午：**
        - 南京路步行街闲逛购物
        - 人民广场休闲漫步

        **晚上：**
        - 外滩夜景观光（上海必打卡，欣赏黄浦江两岸夜景）
        - 黄浦江夜游（可选活动，乘船欣赏更全面的夜景）
        - 品尝当地特色：云南路老字号美食街，尝试本帮菜

        ## 第二天：老上海风情

        **上午：**
        - 上海城隍庙旅游区游览
        - 豫园参观，欣赏中国传统园林建筑
        - 品尝南翔小笼包、生煎等上海特色小吃

        **下午：**
        - 田子坊艺术区漫步，感受上海弄堂文化与创意艺术
        - 新天地石库门建筑群，体验老上海风情与现代融合

        **晚上：**
        - 淮海路/新天地地区晚餐
        - 衡山路酒吧街体验上海夜生活（如果感兴趣）

        ## 第三天：现代上海与科技

        **上午：**
        - 陆家嘴金融区参观
        - 登上上海环球金融中心观光厅（俗称"上海之巅"）
        - 东方明珠塔参观（上海地标性建筑）

        **下午：**
        - 上海科技馆游览（适合各年龄段游客，尤其是家庭游）
        - 世博会遗址公园漫步

        **晚上：**
        - 星巴克臻选烘焙工坊体验（全球最大的星巴克，文化体验）
        - 在陆家嘴附近享用晚餐，欣赏夜景

        ## 第四天：上海迪士尼乐园（全天）

        - 早上提前到达上海迪士尼度假区（建议开园前30分钟到达）
        - 全天游玩上海迪士尼乐园
        - 体验园区内的特色游乐项目、演出和花车巡游
        - 晚上欣赏烟花表演
        - 可选择住在迪士尼度假区内的酒店（如上海迪士尼乐园酒店或玩具总动员酒店）

        ## 第五天：文艺上海与特色街区

        **上午：**
        - 1933老场坊参观（上海特色历史建筑，拍照打卡圣地）
        - 思南路文化街区，探访名人故居

        **下午：**
        - 武康路历史文化名街漫步（法式建筑，文艺氛围浓厚）
        - 中华艺术宫参观（前世博会中国馆，收藏丰富）

        **晚上：**
        - 在外滩源或北外滩地区享用晚餐
        - 可选夜游黄浦江

        ## 第六天：上海周边水乡古镇（选一处即可）

        **方案A：朱家角古镇**
        - 早上乘车前往朱家角古镇（上海最近的江南水乡）
        - 游览古镇风光，体验水乡文化
        - 品尝当地特色美食
        - 晚上返回上海市区

        **方案B：七宝古镇**
        - 游览七宝古镇景区
        - 品尝七宝小吃
        - 购买传统工艺品
        - 晚上返回上海市区

        ## 第七天：休闲购物与告别

        **上午：**
        - 上海野生动物园（如果喜欢动物）或泰晤士小镇（如果喜欢拍照）

        **下午：**
        - 上海购物：可以选择徐家汇商圈、静安寺商圈或IFC、IAPM等高端购物中心
        - 购买伴手礼和纪念品

        **晚上：**
        - 告别晚餐，推荐品尝上海本帮菜（如上海老饭店或本帮菜名店）
        - 整理行李，准备离开

        ## 特色美食推荐

        在七天行程中，不要错过这些上海特色美食：
        1. 生煎包 - 上海最具代表性的小吃之一
        2. 小笼汤包 - 南翔馒头店是知名品牌
        3. 红烧肉 - 上海本帮菜代表作
        4. 排骨年糕 - 鲜得来排骨年糕是老字号
        5. 糖醋小排 - 本帮菜经典菜式
        6. 白斩鸡 - 推荐在小绍兴品尝

        ## 交通贴士

        1. 上海地铁网络发达，覆盖主要景点，建议购买交通卡
        2. 前往周边水乡可搭乘公交或包车
        3. 迪士尼度假区有专线地铁直达
        4. 手机导航和叫车软件在上海非常方便
        5. 酒店至浦东/虹桥机场均有地铁或机场巴士连接

        ## 住宿建议

        - 市中心区域：南京路/人民广场周边（28%游客选择）
        - 商务区域：陆家嘴（现代化高端酒店聚集地）
        - 特色体验：迪士尼度假区（游玩迪士尼时可选择）
        - 文艺范：新天地/田子坊附近（体验上海石库门文化）

        这份行程综合考虑了景点分布、交通便利性和游玩节奏，希望能给您带来丰富多彩的上海之旅！
        '''
        agent('帮我搜索资料，定制一个7天的上海旅游的行程')

def test_aws_doc_search():
    from strands.models import BedrockModel
    bedrock_model = BedrockModel(
        model_id= "us.amazon.nova-pro-v1:0",
        params={"max_tokens": 300000, "temperature": 0.1}
    )
    stdio_mcp_client = MCPClient(lambda: stdio_client(StdioServerParameters(command="uvx", args=["awslabs.aws-documentation-mcp-server@latest"])))
    with stdio_mcp_client:
        agent = Agent(model=bedrock_model,
                    system_prompt="你是一个AWS专家",
                    tools=stdio_mcp_client.list_tools_sync())
        agent("MemoryDB 怎样导出rdb文件？")

if __name__ == "__main__":
    test_web_search()
    test_aws_doc_search()